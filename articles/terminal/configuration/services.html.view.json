{
  "conceptual": "\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"2\"><code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"2\">OneImlx.Terminal</code> supports the dependency injection (DI) software design pattern, a technique for achieving Inversion of Control (IoC) between classes and their dependencies. This framework allows for easy integration with <a href=\"~/articles/terminal/configuration/options.md\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"2\">configuration options</a> and <a href=\"~/articles/terminal/configuration/logging.md\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"2\">logging</a> to create robust, maintainable, and scalable terminal applications.</p>\n<h2 id=\"extension-methods\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"4\">Extension Methods</h2>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"5\">To facilitate the integration of <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"5\">OneImlx.Terminal</code> services into a host application's dependency injection container, the following classes offer extension methods:</p>\n<ul sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"7\">\n<li sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"7\"><a href=\"xref:OneImlx.Terminal.Extensions.IServiceCollectionExtensions\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"7\">IServiceCollectionExtensions</a>: Offers extension methods to register and configure <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"7\">OneImlx.Terminal</code> services within the host application's dependency injection container.</li>\n<li sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"8\"><a href=\"xref:OneImlx.Terminal.Extensions.IHostExtensions\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"8\">IHostExtensions</a>: Provides an extension method to run the terminal routing, enabling the execution of commands within the terminal application.</li>\n<li sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"9\"><a href=\"xref:OneImlx.Terminal.Extensions.ITerminalBuilderExtensions\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"9\">ITerminalBuilderExtensions</a>: Enhances the terminal builder with additional configuration and customization options.</li>\n<li sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"10\"><a href=\"xref:OneImlx.Terminal.Extensions.ICommandBuilderExtensions\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"10\">ICommandBuilderExtensions</a>: Provides extension methods to aid in the configuration and creation of commands in the terminal application.</li>\n<li sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"11\"><a href=\"xref:OneImlx.Terminal.Extensions.IOptionBuilderExtensions\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"11\">IOptionBuilderExtensions</a>: Offers methods for defining and configuring command options, ensuring their proper integration and validation.</li>\n<li sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"12\"><a href=\"xref:OneImlx.Terminal.Configuration.Options.TerminalOptions\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"12\">TerminalOptions</a>: Represents the configurable options for the <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"12\">OneImlx.Terminal</code> terminal application, allowing for customization of its behavior.</li>\n</ul>\n<h2 id=\"hosted-service\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"14\">Hosted Service</h2>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"15\">You need to register a <xref href=\"OneImlx.Terminal.Hosting.TerminalHostedService\" data-throw-if-not-resolved=\"False\" data-raw-source=\"@OneImlx.Terminal.Hosting.TerminalHostedService\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"15\"></xref> using standard .NET extension method <a href=\"xref:Microsoft.Extensions.DependencyInjection.ServiceCollectionHostedServiceExtensions.AddHostedService%601\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"15\"><code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"15\">AddHostedService</code></a>. This will enable you to define and customize terminal startup and lifetime behavior.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"17\">collection.AddHostedService&lt;TestAppHostedService&gt;();\n</code></pre>\n<h2 id=\"http-client\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"21\">HTTP Client</h2>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"22\">If you are using an online license then you will need to register the HttpClient service in your application. This service is used to communicate with the our licensing server to validate the license.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"24\">collection.AddHttpClient(&quot;demo-http&quot;);\n</code></pre>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"28\">The <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"28\">demo-http</code> is the name of the HTTP client instance. You can use any name you like.</p>\n<blockquote sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"30\">\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"30\">INFO: The HTTP client registration is required only if you are using an online license.</p>\n</blockquote>\n<h2 id=\"integrate-framework\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"32\">Integrate Framework</h2>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"33\">Integrating the <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"33\">OneImlx.Terminal</code> framework into a .NET application is straightforward with two standard methods designed for most use cases. These methods facilitate the registration of terminal services within your application's Dependency Injection (DI) service collection. For advanced scenarios, the framework also allows for more granular control by using individual services.</p>\n<h3 id=\"addterminaldefault\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"35\">AddTerminalDefault</h3>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"36\">The <a href=\"xref:OneImlx.Terminal.Extensions.IServiceCollectionExtensions.AddTerminalDefault%60%60%603\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"36\"><code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"36\">AddTerminalDefault</code></a> method adds essential terminal functionalities to your application, such as command handling, text processing, and help provider. It registers the foundational terminal services in your project, allowing customization through setup actions.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"38\">ITerminalBuilder terminalBuilder = collection.AddTerminalDefault&lt;TerminalInMemoryCommandStore, TerminalUnicodeTextHandler, TerminalHelpLoggerProvider&gt;(new TerminalUnicodeTextHandler(),\n    options =&gt;\n    {\n        options.Id = TerminalIdentifiers.TestApplicationId;\n        options.Licensing.LicenseFile = &quot;C:\\\\this\\\\perpetualintelligence\\\\tools\\\\lic\\\\oneimlx-terminal-demo-test.json&quot;;\n        options.Router.Caret = &quot;&gt; &quot;;\n    }\n);\n</code></pre>\n<h3 id=\"addterminalconsole\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"49\">AddTerminalConsole</h3>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"50\">The <a href=\"xref:OneImlx.Terminal.Extensions.IServiceCollectionExtensions.AddTerminalConsole%60%60%60%604\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"50\"><code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"50\">AddTerminalConsole</code></a> method extends <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"50\">AddTerminalDefault</code> by adding console-specific functionalities. This method integrates additional services tailored for console applications, building on the foundational terminal services.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"52\">ITerminalBuilder terminalBuilder = collection.AddTerminalConsole&lt;TerminalInMemoryCommandStore, TerminalUnicodeTextHandler, TerminalHelpConsoleProvider, TerminalSystemConsole&gt;(new TerminalUnicodeTextHandler(),\n    options =&gt;\n    {\n        options.Id = TerminalIdentifiers.TestApplicationId;\n        options.Licensing.LicenseFile = &quot;C:\\\\this\\\\perpetualintelligence\\\\tools\\\\lic\\\\oneimlx-terminal-demo-test.json&quot;;\n        options.Router.Caret = &quot;&gt; &quot;;\n    }\n);\n</code></pre>\n<h3 id=\"advanced-use-cases\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"63\">Advanced Use Cases</h3>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"64\">For more detailed control and customization, developers can use specific services from the OneImlx.Terminal framework. This option supports creating tailored terminal experiences for unique application needs, offering flexibility for intricate setups.</p>\n<h2 id=\"add-descriptors\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"66\">Add Descriptors</h2>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"67\">The <a href=\"xref:OneImlx.Terminal.Extensions.ITerminalBuilderExtensions\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"67\"><code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"67\">ITerminalBuilder</code></a> extensions offer both explicit and declarative syntaxes for registering command, argument and option descriptors within the service collection.</p>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"69\">When deciding between explicit and declarative syntax for command registration, consider both usability and performance implications. Explicit syntax is more efficient as it avoids reflection, unlike declarative syntax, which may be more resource-intensive due to its use of reflection. However, for applications with intricate command hierarchies, the straightforward usability of declarative syntax could be appealing despite potential performance costs. Given that command registration is a startup activity, the performance impact primarily affects initial load time, not runtime. Developers should assess these factors based on their application's specific needs and performance requirements.</p>\n<h3 id=\"explicit-syntax\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"71\">Explicit Syntax</h3>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"72\">The explicit syntax method for command registration in the framework is a direct and controlled approach to integrating command functionalities into your .NET application. This method primarily revolves around the use of hosting builders, which are sophisticated tools provided by the framework to manually define and register command descriptors with the service collection.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"74\">private static void RegisterCommands(ITerminalBuilder terminalBuilder)\n{\n    terminalBuilder.DefineCommand&lt;TestChecker, TestRunner&gt;(&quot;test&quot;, &quot;Test command&quot;, &quot;Test Description&quot;, Commands.CommandType.Root, Commands.CommandFlags.None)\n                        .DefineArgument(1, &quot;arg1&quot;, nameof(String), &quot;The first argument&quot;, Commands.ArgumentFlags.None)\n                            .Add()\n                        .DefineArgument(2, &quot;arg2&quot;, nameof(Int32), &quot;The second argument&quot;, Commands.ArgumentFlags.None)\n                            .Add()\n                        .DefineOption(&quot;version&quot;, nameof(String), &quot;The version option&quot;, Commands.OptionFlags.None, &quot;v&quot;)\n                            .Add()\n                    .Add();\n}\n</code></pre>\n<blockquote sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"89\">\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"89\">NOTE: In the explicit syntax for command registration, the <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"89\">Add()</code> method is necessary for finalizing and registering commands, arguments or options. It commits an element definition and adds the command descriptor to the service collection.</p>\n</blockquote>\n<h3 id=\"declarative-syntax\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"91\">Declarative Syntax</h3>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"92\">Alternatively, descriptors can also be defined directly on command runners using <a href=\"xref:OneImlx.Terminal.Commands.Declarative\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"92\">declarative attributes</a>.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"94\">[CommandDescriptor(&quot;test&quot;, &quot;Test App&quot;, &quot;Test application description.&quot;, Commands.CommandType.Root, Commands.CommandFlags.None)]\n[OptionDescriptor(&quot;version&quot;, nameof(String), &quot;Test version description&quot;, Commands.OptionFlags.None, &quot;v&quot;)]\n[CommandChecker(typeof(CommandChecker))]\npublic class TestRunner : CommandRunner&lt;CommandRunnerResult&gt;, IDeclarativeRunner\n{\n\n}\n</code></pre>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"104\">The framework automatically discovers and registers these command descriptors through the <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"104\">AddDeclarative...</code> extension methods.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"106\">// Add all the commands in the assembly using declarative syntax.\nterminalBuilder.AddDeclarativeAssembly&lt;TestRunner&gt;();\n</code></pre>\n<blockquote sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"111\">\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"111\">NOTE: For declarative syntax it is necessrary to implement <xref href=\"OneImlx.Terminal.Commands.IDeclarativeRunner\" data-throw-if-not-resolved=\"False\" data-raw-source=\"@OneImlx.Terminal.Commands.IDeclarativeRunner\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"111\"></xref> interface in the command runner class.</p>\n</blockquote>\n<h2 id=\"complete-integration-example\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"113\">Complete Integration Example</h2>\n<p sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"114\">Below is an example showing the <code sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"114\">AddTerminalConsole</code> method in action, configuring the terminal framework for a console application with an online demo license.</p>\n<pre><code class=\"lang-csharp\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"116\"> private static void ConfigureOneImlxTerminal(IServiceCollection collection)\n{\n    // Configure the hosted service\n    collection.AddHostedService&lt;TestAppHostedService&gt;();\n\n    // We are using online license so configure HTTP\n    collection.AddHttpClient(&quot;demo-http&quot;);\n\n    // NOTE:\n    // Specify your demo or commercial license file.\n    // Specify your application id.\n    ITerminalBuilder terminalBuilder = collection.AddTerminalConsole&lt;TerminalInMemoryCommandStore, TerminalUnicodeTextHandler, TerminalHelpConsoleProvider, TerminalSystemConsole&gt;(new TerminalUnicodeTextHandler(),\n        options =&gt;\n        {\n            options.Id = TerminalIdentifiers.TestApplicationId;\n            options.Licensing.LicenseFile = &quot;C:\\\\this\\\\perpetualintelligence\\\\tools\\\\lic\\\\oneimlx-terminal-demo-test.json&quot;;\n            options.Router.Caret = &quot;&gt; &quot;;\n        }\n    );\n\n    // Add commands using declarative syntax.\n    terminalBuilder.AddDeclarativeAssembly&lt;TestRunner&gt;();\n}\n</code></pre>\n",
  "type": "Conceptual",
  "source": {
    "remote": {
      "path": "docfx_project/articles/terminal/configuration/services.md",
      "branch": "main",
      "repo": "https://github.com/perpetualintelligence/docs"
    },
    "startLine": 0,
    "endLine": 0
  },
  "path": "articles/terminal/configuration/services.md",
  "documentation": {
    "remote": {
      "path": "docfx_project/articles/terminal/configuration/services.md",
      "branch": "main",
      "repo": "https://github.com/perpetualintelligence/docs"
    },
    "startLine": 0,
    "endLine": 0
  },
  "_appFaviconPath": "images/favicon.ico",
  "_appFooter": "Copyright &copy; 2019-2025. Perpetual Intelligence&reg; L.L.C. All Rights Reserved.",
  "_appLogoPath": "images/logo.ico",
  "_enableSearch": true,
  "pdf": false,
  "pdfCoverPage": "pdf/cover.html",
  "pdfFileName": "oneimlx.pdf",
  "pdfTocPage": true,
  "_systemKeys": [
    "conceptual",
    "type",
    "source",
    "path",
    "documentation",
    "title",
    "rawTitle",
    "wordCount"
  ],
  "rawTitle": "<h1 id=\"services-dependency-injection\" sourcefile=\"articles/terminal/configuration/services.md\" sourcestartlinenumber=\"1\">Services (Dependency Injection)</h1>",
  "title": "Services (Dependency Injection)",
  "wordCount": 857,
  "_key": "articles/terminal/configuration/services.md",
  "_navKey": "~/toc.yml",
  "_navPath": "toc.html",
  "_navRel": "../../../toc.html",
  "_path": "articles/terminal/configuration/services.html",
  "_rel": "../../../",
  "_tocKey": "~/articles/toc.yml",
  "_tocPath": "articles/toc.html",
  "_tocRel": "../../toc.html",
  "__global": {
    "namespacesInSubtitle": "Namespaces",
    "classesInSubtitle": "Classes",
    "structsInSubtitle": "Structs",
    "interfacesInSubtitle": "Interfaces",
    "enumsInSubtitle": "Enums",
    "delegatesInSubtitle": "Delegates",
    "constructorsInSubtitle": "Constructors",
    "fieldsInSubtitle": "Fields",
    "propertiesInSubtitle": "Properties",
    "methodsInSubtitle": "Methods",
    "eventsInSubtitle": "Events",
    "operatorsInSubtitle": "Operators",
    "eiisInSubtitle": "Explicit Interface Implementations",
    "functionsInSubtitle": "Functions",
    "variablesInSubtitle": "Variables",
    "typeAliasesInSubtitle": "Type Aliases",
    "membersInSubtitle": "Members",
    "improveThisDoc": "Edit this page",
    "viewSource": "View Source",
    "inheritance": "Inheritance",
    "derived": "Derived",
    "inheritedMembers": "Inherited Members",
    "package": "Package",
    "namespace": "Namespace",
    "assembly": "Assembly",
    "syntax": "Syntax",
    "overrides": "Overrides",
    "implements": "Implements",
    "remarks": "Remarks",
    "examples": "Examples",
    "seealso": "See Also",
    "declaration": "Declaration",
    "parameters": "Parameters",
    "typeParameters": "Type Parameters",
    "type": "Type",
    "name": "Name",
    "description": "Description",
    "returns": "Returns",
    "fieldValue": "Field Value",
    "propertyValue": "Property Value",
    "eventType": "Event Type",
    "variableValue": "Variable Value",
    "typeAliasType": "Type Alias Type",
    "exceptions": "Exceptions",
    "condition": "Condition",
    "extensionMethods": "Extension Methods",
    "note": "Note",
    "warning": "Warning",
    "tip": "Tip",
    "important": "Important",
    "caution": "Caution",
    "tocToggleButton": "Show / Hide Table of Contents",
    "tocFilter": "Filter by title",
    "search": "Search",
    "searchResults": "Search Results for",
    "searchResultsCount": "{count} results for \"{query}\"",
    "searchNoResults": "No results for \"{query}\"",
    "pageFirst": "First",
    "pagePrev": "Previous",
    "pageNext": "Next",
    "pageLast": "Last",
    "inThisArticle": "In this article",
    "nextArticle": "Next",
    "prevArticle": "Previous",
    "backToTop": "Back to top",
    "themeLight": "Light",
    "themeDark": "Dark",
    "themeAuto": "Auto",
    "changeTheme": "Change theme",
    "copy": "Copy",
    "downloadPdf": "Download PDF",
    "_shared": {}
  },
  "_disableToc": false,
  "docurl": "https://github.com/perpetualintelligence/docs/blob/main/docfx_project/articles/terminal/configuration/services.md/#L1"
}